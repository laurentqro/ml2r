<div class="max-w-3xl mx-auto p-6">
  <%= form_with(model: person, data: { turbo: false }) do |f| %>
    <% if person.errors.any? %>
      <div class="alert alert-error mb-6 shadow-lg">
        <div class="flex items-start">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <div>
            <h2 class="font-bold">
              <%= pluralize(person.errors.count, "error") %> prohibited this person from being saved:
            </h2>
            <ul class="mt-2 list-disc list-inside text-sm">
              <% person.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    <% end %>

    <div class="card bg-base-100 shadow-xl mb-8">
      <div class="card-body">
        <h2 class="card-title flex items-center gap-2 mb-6">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
          </svg>
          Personal Information
        </h2>

        <div class="alert alert-info mb-6 shadow-sm">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span>Please provide accurate information for AML compliance purposes.</span>
        </div>

        <div class="space-y-8">
          <!-- Basic Information -->
          <div>
            <h3 class="font-semibold text-lg flex items-center gap-2 mb-4 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
              </svg>
              Basic Information
            </h3>
            
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
              <div class="form-control">
                <%= f.label :first_name, class: "label pb-1" do %>
                  <span class="label-text flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-base-content/70" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                    First Name
                  </span>
                <% end %>
                <%= f.text_field :first_name, required: true, class: "input input-bordered w-full", placeholder: "Enter first name" %>
              </div>

              <div class="form-control">
                <%= f.label :last_name, class: "label pb-1" do %>
                  <span class="label-text flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-base-content/70" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                    </svg>
                    Last Name
                  </span>
                <% end %>
                <%= f.text_field :last_name, required: true, class: "input input-bordered w-full", placeholder: "Enter last name" %>
              </div>

              <div class="form-control">
                <%= f.label :date_of_birth, class: "label pb-1" do %>
                  <span class="label-text flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-base-content/70" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v7a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H8V3a1 1 0 00-2 0v1zM6 6h2v1a1 1 0 102 0V6h2v1a1 1 0 102 0V6h2v7H4V6h2z" clip-rule="evenodd" />
                    </svg>
                    Date of Birth
                  </span>
                <% end %>
                <%= f.date_field :date_of_birth, required: true, class: "input input-bordered w-full", placeholder: "Select date of birth" %>
              </div>
            </div>
          </div>

          <!-- Profession -->
          <div>
            <h3 class="font-semibold text-lg flex items-center gap-2 mb-4 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd" />
              </svg>
              Profession
            </h3>
            
            <div>
              <%= render "profession_field", f: f %>
            </div>
          </div>

          <!-- Country Information -->
          <div>
            <h3 class="font-semibold text-lg flex items-center gap-2 mb-4 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd" />
              </svg>
              Country Information
            </h3>
            
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
              <%= render "shared/searchable_country_field", f: f, field_name: :nationality %>
              <%= render "shared/searchable_country_field", f: f, field_name: :country_of_residence %>
              <%= render "shared/searchable_country_field", f: f, field_name: :country_of_profession %>
              <%= render "shared/searchable_country_field", f: f, field_name: :country_of_birth %>
            </div>
          </div>

          <!-- Identification Documents -->
          <div>
            <h3 class="font-semibold text-lg flex items-center gap-2 mb-4 text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" />
              </svg>
              Identification Documents
            </h3>
            
            <div data-controller="document-form" class="space-y-4">
              <template data-document-form-target="template">
                <%= f.fields_for :identification_documents, IdentificationDocument.new, child_index: 'NEW_RECORD' do |doc| %>
                  <%= render 'identification_document_fields', f: doc %>
                <% end %>
              </template>

              <%= f.fields_for :identification_documents do |doc| %>
                <%= render 'identification_document_fields', f: doc %>
              <% end %>

              <button type="button" data-action="document-form#add" class="btn btn-outline btn-primary gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                </svg>
                Add Document
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex items-center justify-between gap-x-6">
      <%= link_to clients_path, class: "btn btn-ghost gap-2" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
        </svg>
        Cancel
      <% end %>

      <%= f.button type: "submit", class: "btn btn-primary gap-2" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
        <%= person.new_record? ? "Create Person" : "Update Person" %>
      <% end %>
    </div>
  <% end %>
</div>

