<div class="border rounded-lg p-4 bg-gray-50">
  <div class="flex justify-between items-start">
    <div>
      <span class="py-1 text-xs
        <%= check.completed? ? 'text-green-800' : 
           (check.failed? ? 'text-red-800' : 'text-yellow-800') %>">
        Check <%= check.status %>
      </span>
      <div class="font-medium">
        <span class="py-1
          <%= check.adverse_media_status == 'Adverse Media Found' ? 'text-red-800' : 'text-green-800' %>">
          <%= check.adverse_media_status %>
        </span>
      </div>
      <div class="text-sm text-gray-500">
        <%= check.created_at.strftime("%d %B %Y %H:%M:%S") %>
      </div>
    </div>

    <% if check.completed? && check.result.is_a?(Hash) %>
      <button type="button" 
              class="text-sm text-blue-600 hover:text-blue-800"
              onclick="toggleDetails('<%= dom_id(check) %>')">
        View Details
      </button>
    <% end %>
  </div>

  <% if check.completed? && check.result.is_a?(Hash) %>
    <div id="<%= dom_id(check) %>_details" class="mt-4 hidden">
      <div class="text-sm bg-white p-3 rounded border">
        <%= render "adverse_media_check_result", check: check %>
      </div>
    </div>
  <% end %>
</div>

<script>
  function toggleDetails(id) {
    const detailsElement = document.getElementById(id + '_details');
    if (detailsElement.classList.contains('hidden')) {
      detailsElement.classList.remove('hidden');
    } else {
      detailsElement.classList.add('hidden');
    }
  }
</script> 