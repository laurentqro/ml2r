<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
  <div class="space-y-8">
    <div>
      <h2 class="text-base font-semibold leading-7 text-gray-900">Risk Assessment</h2>
      <p class="mt-1 text-sm leading-6 text-gray-600">
        Review and check applicable risk factors for <strong><%= @person.display_name %></strong>
      </p>
    </div>

    <div class="space-y-10">
      <% RiskFactor.categories.each do |category, _| %>
        <div class="bg-white shadow rounded-lg">
          <div class="px-4 py-5 sm:p-6">
            <h3 class="text-base font-semibold leading-6 text-gray-900">
              <%= category.titleize %> Risk Factors
            </h3>
            
            <div class="mt-4 divide-y divide-gray-200">
              <% RiskFactor.identifiers_for(category).each do |identifier| %>
                <% risk_factor = @risk_factors.find_or_initialize_by(category: category, identifier: identifier) %>
                <div class="relative flex items-start py-4">
                  <div class="min-w-0 flex-1 text-sm">
                    <div class="flex items-center">
                      <%= check_box_tag "risk_factor_#{risk_factor.id}", 
                          "1", 
                          risk_factor.active?,
                          data: { 
                            action: "change->risk-factors#toggle",
                            id: risk_factor.id
                          },
                          class: "h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600" %>
                      <label class="ml-3 font-medium text-gray-900">
                        <%= risk_factor.description %>
                      </label>
                    </div>
                    <% if risk_factor.notes.present? %>
                      <p class="ml-7 text-gray-500"><%= risk_factor.notes %></p>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div> 