<div class="card bg-base-100 hover:shadow-2xl transition-shadow duration-200">
  <div class="card-body p-4">
    <div class="flex justify-between items-start mb-2">
      <%= link_to screening_match_path(@screening, match), class: "no-underline" do %>
        <h3 class="card-title text-lg text-primary hover:text-primary-focus line-clamp-2"><%= match.caption %></h3>
      <% end %>

      <span class="badge <%= match_score_classes(match.external_score).include?('red') ? 'badge-error' : match_score_classes(match.external_score).include?('yellow') ? 'badge-warning' : match_score_classes(match.external_score).include?('green') ? 'badge-success' : 'badge-info' %>">
        Match Score: <%= match.external_score %>
      </span>
    </div>

    <div class="flex flex-wrap items-center gap-2">
      <span class="badge">
        <%= match.schema %>
      </span>

      <% match.topics.each do |topic| %>
        <span class="badge <%= topic_badge_classes(topic).include?('red') ? 'badge-error' : topic_badge_classes(topic).include?('yellow') ? 'badge-warning' : topic_badge_classes(topic).include?('green') ? 'badge-success' : 'badge-info' %>">
          <%= topic_description(topic) %>
        </span>
      <% end %>

      <div class="mt-2 text-sm text-base-content/70">
        <% match.countries.each do |country_code| %>
          <% if country_code == "suhh" %>
            <span class="inline-block mr-2">• Soviet Union</span>
          <% else %>
            <% country = ISO3166::Country[country_code] %>
            <span class="inline-block mr-2">• <%= country ? (country.respond_to?(:common_name) ? country.common_name : country.name) : country_code %></span>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>