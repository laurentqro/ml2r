<div class="card bg-base-100 shadow-xl mt-4">
  <div class="card-body">
    <h2 class="card-title">Country Risk Assessment</h2>

    <div class="space-y-4">
      <% if client.country_of_residence.present? %>
        <div class="flex items-center justify-between">
          <div>
            <p class="font-bold">
              <%= client.clientable_type == "Company" ? "Country of Incorporation" : "Country of Residence" %>:
              <span class="text-base-content/70"><%= country_name(client.country_of_residence) %></span>
            </p>
          </div>
          <span class="badge <%= risk_badge_class(CountryRiskScorer.calculate_risk_score(client.country_of_residence)).include?('red') ? 'badge-error' : risk_badge_class(CountryRiskScorer.calculate_risk_score(client.country_of_residence)).include?('yellow') ? 'badge-warning' : 'badge-success' %>">
            <%= CountryRiskScorer.calculate_risk_score(client.country_of_residence) %>
          </span>
        </div>
      <% end %>

      <% if client.nationality.present? %>
        <div class="flex items-center justify-between">
          <div>
            <p class="font-bold">
              Country of Nationality:
              <span class="text-base-content/70"><%= country_name(client.nationality) %></span>
            </p>
          </div>
          <span class="badge <%= risk_badge_class(CountryRiskScorer.calculate_risk_score(client.nationality)).include?('red') ? 'badge-error' : risk_badge_class(CountryRiskScorer.calculate_risk_score(client.nationality)).include?('yellow') ? 'badge-warning' : 'badge-success' %>">
            <%= CountryRiskScorer.calculate_risk_score(client.nationality) %>
          </span>
        </div>
      <% end %>

      <% if client.country_of_profession.present? %>
        <div class="flex items-center justify-between">
          <div>
            <p class="font-bold">
              Country of Profession:
              <span class="text-base-content/70"><%= country_name(client.country_of_profession) %></span>
            </p>
          </div>
          <span class="badge <%= risk_badge_class(CountryRiskScorer.calculate_risk_score(client.country_of_profession)).include?('red') ? 'badge-error' : risk_badge_class(CountryRiskScorer.calculate_risk_score(client.country_of_profession)).include?('yellow') ? 'badge-warning' : 'badge-success' %>">
            <%= CountryRiskScorer.calculate_risk_score(client.country_of_profession) %>
          </span>
        </div>
      <% end %>

      <% if client.country_of_birth.present? %>
        <div class="flex items-center justify-between">
          <div>
            <p class="font-bold">
              Country of Birth:
              <span class="text-base-content/70"><%= country_name(client.country_of_birth) %></span>
            </p>
          </div>
          <span class="badge <%= risk_badge_class(CountryRiskScorer.calculate_risk_score(client.country_of_birth)).include?('red') ? 'badge-error' : risk_badge_class(CountryRiskScorer.calculate_risk_score(client.country_of_birth)).include?('yellow') ? 'badge-warning' : 'badge-success' %>">
            <%= CountryRiskScorer.calculate_risk_score(client.country_of_birth) %>
          </span>
        </div>
      <% end %>

      <div class="divider"></div>

      <div class="flex items-center justify-between">
        <span class="font-bold">Total</span>
        <span class="badge <%= risk_badge_class(client.country_risk_score).include?('red') ? 'badge-error' : risk_badge_class(client.country_risk_score).include?('yellow') ? 'badge-warning' : 'badge-success' %> badge-lg">
          <%= client.country_risk_score %>
        </span>
      </div>
    </div>
  </div>
</div> 
